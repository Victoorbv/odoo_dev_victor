<odoo>
  <data>

<!-- VISTA CLIENTES  -->
<!-- FORM CLIENTES-->
  <record model="ir.ui.view" id="dron_vic.view_partner_form_clientes_inherit">
      <field name="name">Clientes form</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"></field>
      <field name="mode">primary</field>
      <field name="arch" type="xml"> 
          <xpath expr="//field[@name='function']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//field[@name='website']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
       <xpath expr="//page[@name='contact_addresses']" position="attributes">
            <attribute name="invisible">1</attribute> 
        </xpath>
        <xpath expr="//page[@name='sales_purchases']" position="attributes">
            <attribute name="invisible">1</attribute> 
        </xpath>
        <xpath expr="//page[@name='internal_notes']" position="attributes">
            <attribute name="invisible">1</attribute> 
        </xpath>
        <xpath expr="//sheet" position="inside">
        <group string="ROLES EN DRONIFY">
          <group>
            <field name="es_cliente" readonly="1"/>
            <field name="es_vip" invisible="not es_cliente"/>
          </group>
          <group>
              <field name="es_piloto"/>
              <field name="licencia" invisible="not es_piloto" required="es_piloto"/>
          </group>
        </group> 
        </xpath> 
      </field>
    </record>


    <record model="ir.actions.act_window" id="dron_vic.action_clientes_window">
      <field name="name">Clientes</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">list,form</field>
      <field name="domain">[('es_cliente','=',True)]</field>
      <field name="context">{'default_es_cliente': True}</field>
    </record>

    <record model="ir.actions.act_window.view" id="dron_vic.action_clientes_list">
      <field name="sequence" eval="1"/>
      <field name="view_mode">list</field>
      <field name="view_id" ref="base.view_partner_tree"/>
      <field name="act_window_id" ref="dron_vic.action_clientes_window"/>
    </record>

    <record model="ir.actions.act_window.view" id="dron_vic.action_clientes_form">
      <field name="sequence" eval="2"/>
      <field name="view_mode">form</field>
      <field name="view_id" ref="dron_vic.view_partner_form_clientes_inherit"/>
      <field name="act_window_id" ref="dron_vic.action_clientes_window"/>
    </record>

<!-- VISTA PILOTOS -->
<!-- FORM PILOTOS -->
  <record model="ir.ui.view" id="dron_vic.view_partner_form_pilotos_inherit">
      <field name="name">Pilotos form</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"></field>
      <field name="mode">primary</field>
      <field name="arch" type="xml"> 
        <xpath expr="//field[@name='function']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//field[@name='website']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
       <xpath expr="//page[@name='contact_addresses']" position="attributes">
            <attribute name="invisible">1</attribute> 
        </xpath>
        <xpath expr="//page[@name='sales_purchases']" position="attributes">
            <attribute name="invisible">1</attribute> 
        </xpath>
        <xpath expr="//page[@name='internal_notes']" position="attributes">
            <attribute name="invisible">1</attribute> 
        </xpath>
        <xpath expr="//sheet" position="inside">
        <group string="ROLES EN DRONIFY">
          <group>
            <field name="es_piloto" readonly="1"/>
            <field name="licencia" required="es_piloto"/>
            <field name="dron_autorizado_ids" widget="many2many_tags"/>
          </group>
          <group>
            <field name="es_cliente"/>
            <field name="es_vip" invisible="not es_cliente"/>
          </group>
        </group> 
        </xpath>    
      </field>
    </record>


    <record model="ir.actions.act_window" id="dron_vic.action_pilotos_window">
      <field name="name">Pilotos</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">list,form</field>
      <field name="domain">[('es_piloto','=',True)]</field>
      <field name="context">{'default_es_piloto': True}</field>
    </record>

    <record model="ir.actions.act_window.view" id="dron_vic.action_pilotos_list">
      <field name="sequence" eval="1"/>
      <field name="view_mode">list</field>
      <field name="view_id" ref="base.view_partner_tree"/>
      <field name="act_window_id" ref="dron_vic.action_pilotos_window"/>
    </record>

    <record model="ir.actions.act_window.view" id="dron_vic.action_pilotos_form">
      <field name="sequence" eval="2"/>
      <field name="view_mode">form</field>
      <field name="view_id" ref="dron_vic.view_partner_form_pilotos_inherit"/>
      <field name="act_window_id" ref="dron_vic.action_pilotos_window"/>
    </record>



<!-- VISTA DRONES  -->
<!-- LISTA DRONES -->
  <record model="ir.ui.view" id="dron_vic.list_drones">
      <field name="name">Drones Victor list</field>
      <field name="model">dron_vic.drones_vic</field>
      <field name="arch" type="xml">
        <list decoration-danger="bateria &lt; 25">
          <field name="name"/>
          <field name="capacidad_max"/>
          <field name="bateria" widget="progressbar"/>
          <field name="estado" widget="badge"
                 decoration-success="estado == 'disponible'"
                 decoration-warning="estado == 'en_uso'"
                 decoration-muted="estado == 'mantenimiento'"/>
        </list>
      </field>
  </record>

  <record model="ir.actions.act_window" id="dron_vic.action_drones_window">
      <field name="name">Drones</field>
      <field name="res_model">dron_vic.drones_vic</field>
      <field name="view_mode">list,form</field>
  </record>

<!-- VISTA PAQUETES  -->
<!-- LISTA PAQUETES -->
  <record model="ir.ui.view" id="dron_vic.list_paquetes">
      <field name="name">Paquetes Victor list</field>
      <field name="model">dron_vic.paquetes_vic</field>
      <field name="arch" type="xml">
      <list>
          <field name="codigo"/>
          <field name="name"/>
          <field name="peso"/>
          <field name="cliente_id"/>
          <field name="vuelo_id"/>
          <field name="dron_relacionado"/>
        </list>
      </field>
  </record>

 <record model="ir.actions.act_window" id="dron_vic.action_paquetes_window">
    <field name="name">Paquetes</field>
    <field name="res_model">dron_vic.paquetes_vic</field>
    <field name="view_mode">list</field>
  </record>

<!-- VISTA VUELOS -->
<!-- LISTA VUELOS -->
  <record model="ir.ui.view" id="dron_vic.list_vuelos">
      <field name="name">Vuelos Victor list</field>
      <field name="model">dron_vic.vuelos_vic</field>
      <field name="arch" type="xml">
        <list>
          <field name="codigo"/>
          <field name="name"/>
          <field name="dron_id"/>
          <field name="piloto_id"/>
          <field name="peso_total"/>
          <field name="consumo_estimado"/>
          <field name="preparado" widget="boolean" class="text-center"/>
          <field name="realizado" widget="boolean" class="text-center"/>
        </list>
      </field>
  </record>

<!-- FORM VUELOS -->
<record model="ir.ui.view" id="vista_vuelo_form">
      <field name="name">Vuelos form</field>
      <field name="model">dron_vic.vuelos_vic</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <button name="action_preparar_vuelo" string="Preparar Vuelo" type="object" class="oe_highlight" invisible="preparado" />
            <button name="action_desbloquear" string="Modificar Datos" type="object" invisible="not preparado or realizado"/>
            <button name="action_finalizar_vuelo" string="Marcar como Realizado" type="object" class="oe_highlight" invisible="not preparado or realizado" />
          </header>
          <sheet>
            <group>
              <group string="PlanificaciÃ³n">
                <field name="name" readonly="preparado"/>
                <field name="dron_id" readonly="preparado"/>
                <field name="piloto_id" readonly="preparado"/>
              </group>
              <group string="Estado y control">
                <field name="preparado" readonly="1"/>
                <field name="realizado" readonly="1"/>
              </group>
            </group>
            <notebook>
              <page string="Paquetes">
                <field name="paquetes_ids" readonly="preparado"/>
                <group>
                  <group>
                    <field name="peso_total" /> 
                    <field name="consumo_estimado" widget="monetary" options="{'symbol': '%'}"/>                  
                  </group>
                </group>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <!-- actions opening views on models -->
    <record model="ir.actions.act_window" id="dron_vic.action_vuelos_window">
      <field name="name">Vuelos</field>
      <field name="res_model">dron_vic.vuelos_vic</field>
      <field name="view_mode">list,form</field>
    </record>

    <record model="ir.actions.act_window" id="dron_vic.action_window">
      <field name="name">Dron_vic window</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">list,form</field>
    </record>


    <!-- server action to the one above -->

    <record model="ir.actions.server" id="dron_vic.action_server">
      <field name="name">Dron_vic server</field>
      <field name="model_id" ref="base.model_res_partner"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "list,form",
          "res_model": model._name,
        }
      </field>
    </record>

    <!-- Top menu item -->

    <menuitem name="Dronify" id="dron_vic.menu_root"/>

    <!-- menu categories -->

    <menuitem name="Pilotos" id="dron_vic.menu_1" parent="dron_vic.menu_root"
    action="dron_vic.action_pilotos_window"/>
    <menuitem name="Clientes" id="dron_vic.menu_2" parent="dron_vic.menu_root" 
    action="dron_vic.action_clientes_window"/>
    <menuitem name="Drones" id="dron_vic.menu_3" parent="dron_vic.menu_root"
    action="dron_vic.action_drones_window"/>
    <menuitem name="Paquetes" id="dron_vic.menu_4" parent="dron_vic.menu_root"
    action="dron_vic.action_paquetes_window"/>
    <menuitem name="Vuelos" id="dron_vic.menu_5" parent="dron_vic.menu_root"
    action="dron_vic.action_vuelos_window"/>

    <!-- actions -->

    <!-- <menuitem name="List" id="dron_vic.menu_1_list" parent="dron_vic.menu_1"
              action="dron_vic.action_clientes_window"/>
    <menuitem name="Server to list" id="dron_vic" parent="dron_vic.menu_2"
              action="dron_vic.action_server"/> 
    -->

  </data>
</odoo>
